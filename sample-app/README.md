# Модуль sample-app

## Контроллер
Просто для удобства, чтобы инициировать отправку случайных записи трека приложением.
При получении запроса
    curl --location 'localhost:8080/track/send_track_record' \
    --header 'Content-Type: application/json' \
    --data '1'
приложение попытается установить соединение с сервером, адрес и порт
которого указаны в проперти

    tcp:
        server-address: "localhost"
        server-port: 9090

авторизоваться, и отправить указанное в атрибуте data запроса количество записей трека на этот сервер

Приложение предназначено для работы против проверочного скрипта, который можно скачать из репозитория
https://github.com/SatisSoft/egts-debugger/tree/master/doc
и запустить локально

проверка работоспособности заключается в запуске скрипта тестирования командой

    python start_client_debugger.py -n 4 -d 333

где
    - 4   - количество пакетов, которые должен принять проверочный скрипт
    - 333 - dispatcher_id от которого скрипт будет принимать запрос авторизации, с которого начинается передача (задается в проперти)

## Пример реализации нового типа подзаписи
В пакете extension для примера реализован новый тип подзаписи, отсутствующий в модуле library.
Конечно же, рекомендуется сделать это в library и подготовить мерж реквест, чтобы ваши последователи могли
"стоять на плечах гигантов", но в случае нужно скорее-скорее, то расширить функционал можно прямо в приложении, что и продемонстрировано
Для примера реализован тип подзаписи EGTS_SR_ABS_CNTR_DATA - счетчик. Id типа подзаписи 25 согласно ГОСТ
    Таблица Б.1 - Список подзаписей сервиса EGTS_TELEDATA_SERVICE

Для его реализации выполнены следующие шаги:
    1 - реализован дата класс CounterSubRecordData унаследованный от SubRecordData с двумя полями - номер счетчика (байт)
    и значение счетчика (три байта). Структура и размерности данных определены тем же ГОСТ
    2 - реализован энкодер CounterDataEncoder унаследованный AbstractSubRecordEncoder
    3 - спринг бин созданного энкодера инициализирован в конфигурационном классе ImplementedEncodersConfiguration

Теперь новую подзапись можно класть в формируемые пакеты наравне с подзаписями других типов.
Для кодировки-декодировки пакета достаточно применить корневой энкодер egtsPacketEncoder к корневому пакету либо его бинарному представлению
Подробнее работа с новым типом подзаписи в составе пакета иллюстрирована в тестовом классе CounterDataEncoderTest